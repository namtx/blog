<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> Proc vs lambda | namtx.dev </title> <meta name="description" content=" Ruby on Rails, Devops and more "> <meta name="keywords" content="blog, web, devops, ruby on rails"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="Tran Xuan Nam"> <meta property="article:section" content=""> <meta property="article:tag" content=""> <meta property="article:published_time" content="2017-07-09 00:00:00 +0000"> <meta property="og:url" content="https://namtx.github.io/2017/Proc+vs+lambda/"> <meta property="og:title" content=" Proc vs lambda | namtx.dev "> <meta property="og:image" content="https://namtx.github.io"> <meta property="og:description" content=" Ruby on Rails, Devops and more "> <meta property="og:site_name" content="Tran Xuan Nam"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content=""> <meta name="twitter:title" content=" Proc vs lambda | namtx.dev "> <meta name="twitter:description" content=" Ruby on Rails, Devops and more "> <meta name="twitter:image:src" content="https://namtx.github.io"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" Proc vs lambda | namtx.dev "> <meta itemprop="description" content=" Ruby on Rails, Devops and more "> <meta itemprop="image" content="https://namtx.github.io"> <!-- Canonical link tag --> <link rel="canonical" href="https://namtx.github.io/2017/Proc+vs+lambda/"> <link rel="alternate" type="application/rss+xml" title="namtx.dev" href="https://namtx.github.io/feed.xml"> <!-- rel prev and next --> <link rel="stylesheet" href="https://namtx.github.io/assets/css/main.css"> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="icon" href="/favicon.ico" type="image/x-icon"> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="https://namtx.github.io/">namtx<span>.dev</span></a></h1> <ul class="navbar"> <li><a href="https://namtx.github.io/about">About me</a></li> <li><a href="https://bookmarks.namtx.now.sh/" target="_blank">Bookmarks</a></li> <li><a href="https://namtx.github.io/til">TIL</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <p class="post-meta"><time datetime="2017-07-09T00:00:00+00:00" itemprop="datePublished">Jul 9, 2017</time></p> <h1 class="post-title" itemprop="name headline">Proc vs lambda</h1> </header> <div class="post-content" itemprop="articleBody"> <p> </p> <p>One difference is in the way they handle arguments. Creating a proc using <code class="highlighter-rouge">proc {}</code> and <code class="highlighter-rouge">Proc.new {}</code> are equivalent. However, using <code class="highlighter-rouge">lambda {}</code> gives you a <code class="highlighter-rouge">proc</code> that checks the number of arguments passed to it. From <code class="highlighter-rouge">ri Kernel#lambda</code>:</p> <blockquote> <p>Equivalent to Proc.new, except the resulting Proc objects check the number of parameters passed when called. An example:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">p</span> <span class="o">=</span> <span class="no">Proc</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">b</span><span class="o">**</span><span class="mi">2</span> <span class="p">}</span> <span class="c1"># =&gt; #&lt;Proc:0x3c7d28@(irb):1&gt;</span>
<span class="nb">p</span><span class="p">.</span><span class="nf">call</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="c1"># =&gt; 5</span>
<span class="nb">p</span><span class="p">.</span><span class="nf">call</span> <span class="mi">1</span> <span class="c1"># =&gt; NoMethodError: undefined method `**' for nil:NilClass</span>
<span class="nb">p</span><span class="p">.</span><span class="nf">call</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="c1"># =&gt; 5</span>
<span class="n">l</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">b</span><span class="o">**</span><span class="mi">2</span> <span class="p">}</span> <span class="c1"># =&gt; #&lt;Proc:0x15016c@(irb):5 (lambda)&gt;</span>
<span class="n">l</span><span class="p">.</span><span class="nf">call</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="c1"># =&gt; 5</span>
<span class="n">l</span><span class="p">.</span><span class="nf">call</span> <span class="mi">1</span> <span class="c1"># =&gt; ArgumentError: wrong number of arguments (1 for 2)</span>
<span class="n">l</span><span class="p">.</span><span class="nf">call</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="c1"># =&gt; ArgumentError: wrong number of arguments (3 for 2)</span>
</code></pre></div> </div> <p>In addition, as Ken points out, using <code class="highlighter-rouge">return</code> inside a <code class="highlighter-rouge">lambda</code> returns the value of that <code class="highlighter-rouge">lambda</code>, but using <code class="highlighter-rouge">return</code> in a <code class="highlighter-rouge">proc</code> returns from the <code class="highlighter-rouge">enclosing block</code>.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">lambda</span> <span class="p">{</span> <span class="k">return</span> <span class="ss">:foo</span> <span class="p">}.</span><span class="nf">call</span> <span class="c1"># =&gt; :foo</span>
<span class="k">return</span> <span class="c1"># =&gt; LocalJumpError: unexpected return</span>
<span class="no">Proc</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="k">return</span> <span class="ss">:foo</span> <span class="p">}.</span><span class="nf">call</span> <span class="c1"># =&gt; LocalJumpError: unexpected return</span>
</code></pre></div> </div> <p>So for most quick uses theyâ€™re the same, but if you want automatic strict argument checking (which can also sometimes help with debugging), or if you need to use the return statement to return the value of the <code class="highlighter-rouge">proc</code>, use <code class="highlighter-rouge">lambda</code>.</p> </blockquote> </div> </article> <footer class="site-footer"> <div class="container"> <small class="block">&copy; 2022 Tran Xuan Nam &middot; &lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/heiswayi/thinkspace">Thinkspace theme</a></small> </div> </footer> </main> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-XXXXX-XX']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </body> </html>
